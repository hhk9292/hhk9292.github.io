<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.74.3" />

  <title>2020 KAKAO BLIND 4 가사 검색 &middot; KISS</title>

  <meta name="description" content="" />

  

<meta itemprop="name" content="2020 KAKAO BLIND 4 가사 검색">
<meta itemprop="description" content="문제 풀러 가기
문제 풀이 가사 단어 제한사항   words의 길이(가사 단어의 개수)는 2 이상 100,000 이하입니다.">
<meta itemprop="datePublished" content="2020-09-06T20:31:47+09:00" />
<meta itemprop="dateModified" content="2020-09-06T20:31:47+09:00" />
<meta itemprop="wordCount" content="511">



<meta itemprop="keywords" content="" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="2020 KAKAO BLIND 4 가사 검색"/>
<meta name="twitter:description" content="문제 풀러 가기
문제 풀이 가사 단어 제한사항   words의 길이(가사 단어의 개수)는 2 이상 100,000 이하입니다."/>


<meta property="og:title" content="2020 KAKAO BLIND 4 가사 검색" />
<meta property="og:description" content="문제 풀러 가기
문제 풀이 가사 단어 제한사항   words의 길이(가사 단어의 개수)는 2 이상 100,000 이하입니다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/algorithm/2020_kakaoblind_4/" />
<meta property="article:published_time" content="2020-09-06T20:31:47+09:00" />
<meta property="article:modified_time" content="2020-09-06T20:31:47+09:00" />



  <link type="text/css"
        rel="stylesheet"
        href="/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="/css/hyde.css">

  


  <link type="text/css" rel="stylesheet" href="/css/blog.css">

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="/images/profile.png" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <h1>KISS</h1>

      
      <p class="lead">Keep it simple, stupid</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/algorithm/">Algorithm</a>
        </li><li>
          <a href="/vue/">Vue</a>
        </li><li>
          <a href="/about/">About</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://github.com/hhk9292" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1>2020 KAKAO BLIND 4 가사 검색</h1>

  <div class="post-date">
    <time datetime="2020-09-06T20:31:47&#43;0900">Sep 6, 2020</time> &middot; 3 min read
  </div>

  <p><a href="https://programmers.co.kr/learn/courses/30/lessons/60060">문제 풀러 가기</a></p>
<h2 id="문제-풀이">문제 풀이</h2>
<h3 id="가사-단어-제한사항">가사 단어 제한사항</h3>
<ul>
<li>
<p><code>words</code>의 길이(가사 단어의 개수)는 2 이상 100,000 이하입니다.</p>
</li>
<li>
<p>각 가사 단어의 길이는 1 이상 10,000 이하로 빈 문자열인 경우는 없습니다.</p>
</li>
<li>
<p>전체 가사 단어 길이의 합은 2 이상 1,000,000 이하입니다.</p>
</li>
<li>
<p>가사에 동일 단어가 여러 번 나올 경우 중복을 제거하고 <code>words</code>에는 하나로만 제공됩니다.</p>
</li>
<li>
<p>각 가사 단어는 오직 알파벳 소문자로만 구성되어 있으며, 특수문자나 숫자는 포함하지 않는 것으로 가정합니다.</p>
</li>
</ul>
<h3 id="검색-키워드-제한사항">검색 키워드 제한사항</h3>
<ul>
<li><code>queries</code>의 길이(검색 키워드 개수)는 2 이상 100,000 이하입니다.</li>
<li>각 검색 키워드의 길이는 1 이상 10,000 이하로 빈 문자열인 경우는 없습니다.</li>
<li>전체 검색 키워드 길이의 합은 2 이상 1,000,000 이하입니다.</li>
<li>검색 키워드는 중복될 수도 있습니다.</li>
<li>각 검색 키워드는 오직 알파벳 소문자와 와일드카드 문자인 <code>'?'</code> 로만 구성되어 있으며, 특수문자나 숫자는 포함하지 않는 것으로 가정합니다.</li>
<li>검색 키워드는 와일드카드 문자인 <code>'?'</code>가 하나 이상 포함돼 있으며, <code>'?'</code>는 각 검색 키워드의 접두사 아니면 접미사 중 하나로만 주어집니다.
<ul>
<li>예를 들어 <code>&quot;??odo&quot;</code>, <code>&quot;fro??&quot;</code>, <code>&quot;?????&quot;</code>는 가능한 키워드입니다.</li>
<li>반면에 <code>&quot;frodo&quot;</code>(<code>'?'</code>가 없음), <code>&quot;fr?do&quot;</code>(<code>'?'</code>가 중간에 있음), <code>&quot;?ro??&quot;</code>(<code>'?'</code>가 양쪽에 있음)는 불가능한 키워드입니다.</li>
</ul>
</li>
</ul>
<h3 id="풀이-방법">풀이 방법</h3>
<ul>
<li>Trie 구조를 이용해 문제를 푼다.</li>
<li>총 20000개의 Trie를 만들어야 한다.
<ul>
<li>검색 키워드의 길이가 1 ~ 10000이기 때문에 각 길이에 해당하는 Trie를 생성한다.</li>
<li>와일드카드 문자가 접두사, 접미사에 올 수 있기 때문에 정방향 문자열이 들어가는 Trie와 역방향 문자열이 들어가는 Trie를 생성해야 한다.</li>
</ul>
</li>
<li>Tire를 구성하는 노드에는 현재 노드를 거쳐가는 단어의 수와 자식 노드만 저장한다.</li>
</ul>
<h3 id="코드">코드</h3>
<p><a href="https://github.com/hhk9292/algorithm/blob/master/2020KAKAOBLIND/4.py">전체 코드</a></p>
<ul>
<li>
<p>노드</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Node</span>(object):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Node for Trie
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
  
    <span style="color:#66d9ef">def</span> __init__(self):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        노드가 생성 될 때 실행되는 함수
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
  
        self<span style="color:#f92672">.</span>count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>  <span style="color:#75715e"># 현재 노드를 거쳐가는 단어의 수</span>
        self<span style="color:#f92672">.</span>children <span style="color:#f92672">=</span> dict()  <span style="color:#75715e"># 자식 노드</span>
</code></pre></div></li>
<li>
<p>Trie</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Trie</span>(object):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Trie
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
  
    <span style="color:#66d9ef">def</span> __init__(self):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        Trie 구조가 생성될 때 실행되는 함수
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
  
        new_node <span style="color:#f92672">=</span> Node()
        self<span style="color:#f92672">.</span>header <span style="color:#f92672">=</span> new_node
  
  
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">insert</span>(self, word):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        단어를 Trie 구조에 저장하는 함수
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">        :param word:
</span><span style="color:#e6db74">        저장하려는 단어
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
  
        <span style="color:#75715e"># Trie 의 header 를 시작점으로 잡는다.</span>
        curr_node <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>header
        <span style="color:#66d9ef">for</span> letter <span style="color:#f92672">in</span> word:  <span style="color:#75715e"># 단어의 문자를 순회하면서</span>
            curr_node<span style="color:#f92672">.</span>count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>  <span style="color:#75715e"># 이 노드를 거쳐간 단어의 개수를 증가시켜준다.</span>
            <span style="color:#75715e"># 자식 노드에 문자가 있으면 그 노드로 이동</span>
            <span style="color:#66d9ef">if</span> letter <span style="color:#f92672">in</span> curr_node<span style="color:#f92672">.</span>children<span style="color:#f92672">.</span>keys():
                curr_node <span style="color:#f92672">=</span> curr_node<span style="color:#f92672">.</span>children[letter]
            <span style="color:#75715e"># 없으면 새로운 노드를 만들어 저장 후 이동</span>
            <span style="color:#66d9ef">else</span>:
                new_node <span style="color:#f92672">=</span> Node()
                curr_node<span style="color:#f92672">.</span>children[letter] <span style="color:#f92672">=</span> new_node
                curr_node <span style="color:#f92672">=</span> new_node
        <span style="color:#75715e"># 제일 마지막 노드의 카운트도 1 증가</span>
        curr_node<span style="color:#f92672">.</span>count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
  
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">search</span>(self, word):
        <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">        Trie 구조에서 원하는 단어가 있는지 확인
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">        :param word:
</span><span style="color:#e6db74">        찾으려는 단어
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">        :return:
</span><span style="color:#e6db74">        찾으려는 단어이거나, 그 단어로 시작하는 단어들의 개수를 리턴
</span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
  
        <span style="color:#75715e"># Trie 의 header 를 시작점으로 잡는다.</span>
        curr_node <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>header
        <span style="color:#66d9ef">for</span> letter <span style="color:#f92672">in</span> word:
            <span style="color:#66d9ef">if</span> letter <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> curr_node<span style="color:#f92672">.</span>children<span style="color:#f92672">.</span>keys():
                <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
            <span style="color:#66d9ef">else</span>:
                curr_node <span style="color:#f92672">=</span> curr_node<span style="color:#f92672">.</span>children[letter]
        <span style="color:#66d9ef">return</span> curr_node<span style="color:#f92672">.</span>count
</code></pre></div></li>
<li>
<p>가사와 검색 키워드가 있을 때 개수를 반환하는 함수</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">solution</span>(words, queries):
    <span style="color:#75715e"># 키워드의 길이가 1이상 10000 이하이므로 10001짜리 리스트를 2개 만든다.</span>
    <span style="color:#75715e"># 리스트를 2개 만드는 이유는 와일드카드가 접두사로 오는 경우 뒤집어서 찾아야 하기 때문</span>
  
    normal_tries <span style="color:#f92672">=</span> [Trie() <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10001</span>)]
    backward_tries <span style="color:#f92672">=</span> [Trie() <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">10001</span>)]
  
    <span style="color:#75715e"># 정방향 단어와 역방향 단어 모두 각 길이에 맞는 Trie 에 저장</span>
    <span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
        n <span style="color:#f92672">=</span> len(word)
        normal_tries[n]<span style="color:#f92672">.</span>insert(word)
        backward_tries[n]<span style="color:#f92672">.</span>insert(word[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>])
  
    answer <span style="color:#f92672">=</span> []
    <span style="color:#66d9ef">for</span> query <span style="color:#f92672">in</span> queries:
        n <span style="color:#f92672">=</span> len(query)
        <span style="color:#75715e"># 와일드카드 문자로 시작하는 단어는 ?를 없애고 뒤집어준다.</span>
        <span style="color:#66d9ef">if</span> query<span style="color:#f92672">.</span>startswith(<span style="color:#e6db74">&#39;?&#39;</span>):
            query <span style="color:#f92672">=</span> query<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;?&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
            answer<span style="color:#f92672">.</span>append(backward_tries[n]<span style="color:#f92672">.</span>search(query[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]))
        <span style="color:#75715e"># 와일드카드 문자가 뒤에 있으면 ?만 없애준다.</span>
        <span style="color:#66d9ef">else</span>:
            query <span style="color:#f92672">=</span> query<span style="color:#f92672">.</span>replace(<span style="color:#e6db74">&#39;?&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
            answer<span style="color:#f92672">.</span>append(normal_tries[n]<span style="color:#f92672">.</span>search(query))
  
    <span style="color:#66d9ef">return</span> answer
</code></pre></div></li>
</ul>

</div>


  </main>

  <footer>
  <div>
    &copy; Author Name 2020

    &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

    
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  <script src="/js/blog.js"></script>

  
</body>
</html>
